appId: com.eko.studio
productName: Eko Studio
copyright: Copyright (c) 2024

directories:
  output: release
  buildResources: electron/resources

# Files to include in the app
files:
  - dist-electron/**/*
  - "!node_modules"

# Include electron-updater from devDependencies via extraMetadata
extraMetadata:
  dependencies:
    electron-updater: "^6.6.2"

# Extra resources (not packed into asar)
extraResources:
  # Next.js standalone build
  - from: .next/standalone
    to: standalone
    filter:
      - "**/*"
  # Static files
  - from: .next/static
    to: standalone/.next/static
    filter:
      - "**/*"
  # Public files
  - from: public
    to: standalone/public
    filter:
      - "**/*"
  # Playwright browsers (copied by build script)
  - from: playwright-browsers
    to: playwright-browsers
    filter:
      - "**/*"

# Unpack native modules from asar
asarUnpack:
  - "**/*.node"

# macOS configuration
mac:
  target:
    - target: dmg
      arch:
        - x64
        - arm64
    - target: zip
      arch:
        - x64
        - arm64
  icon: electron/resources/icon.icns
  category: public.app-category.developer-tools
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: electron/resources/entitlements.mac.plist
  entitlementsInherit: electron/resources/entitlements.mac.plist

# Windows configuration
win:
  target:
    - target: nsis
      arch:
        - x64
  icon: electron/resources/icon.ico

nsis:
  oneClick: false
  perMachine: false
  allowToChangeInstallationDirectory: true
  deleteAppDataOnUninstall: false
  createDesktopShortcut: true
  createStartMenuShortcut: true

# Linux configuration
linux:
  target:
    - target: AppImage
      arch:
        - x64
    - target: deb
      arch:
        - x64
  icon: electron/resources/icons
  category: Development
  maintainer: Eko Studio Team

# Auto-update configuration
publish:
  provider: github
  owner: your-github-username
  repo: eko-studio
  releaseType: release

# Build hooks (uncomment when ready for production with Apple Developer account)
# afterSign: scripts/notarize.js

# Compression
compression: maximum
